/*Noms :
  NINTUNZE Honor√©
  PIERART Valentin
*/


#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <string.h>
#include "fatal.h"
int main (int argc, char* argv[]){ /*./maccess [nom_fichier] [options: -w,-r ou -x] [option -v] */
  int i;
  char* msg;
  msg = "./maccess : illegal option.\n\tUsage: ./maccess [nom_fichier] [options: -rwx] [option: -v]\n";
  if ((argc < 2) || (argc > 6)) {
    printf("%s",msg); 
    return 0;
  }
  
  for(i = 2; i < argc; i++){
    fatal(argv[i][0] != '-', msg, 101);
    switch (argv[i][1]) 
      {
      case 'r' : access(argv[1],R_OK); break;
      case 'w' : access(argv[1],W_OK); break;
      case 'x' : access(argv[1],X_OK); break;
      }
  }
  
  if ((argv[argc-1][0] == '-') && (argv[argc-1][1] == 'v'))
    printf("Error : %s",strerror(errno));
  
    
  return errno; 
}
